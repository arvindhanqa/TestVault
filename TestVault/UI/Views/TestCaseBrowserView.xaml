<UserControl x:Class="TestVault.UI.Views.TestCaseBrowserView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <DockPanel>
        <!-- Toolbar Row -->
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="5">
            <TextBox Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                     Width="250" Margin="0,0,5,0" VerticalContentAlignment="Center">
                <TextBox.Style>
                    <Style TargetType="TextBox">
                        <Style.Triggers>
                            <Trigger Property="Text" Value="">
                                <Setter Property="Background">
                                    <Setter.Value>
                                        <VisualBrush AlignmentX="Left" AlignmentY="Center" Stretch="None">
                                            <VisualBrush.Visual>
                                                <TextBlock Text="  Search test cases..." Foreground="Gray" FontStyle="Italic" />
                                            </VisualBrush.Visual>
                                        </VisualBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style>
            </TextBox>

            <TextBlock Text="Module:" VerticalAlignment="Center" Margin="5,0,3,0" />
            <ComboBox ItemsSource="{Binding Modules}" SelectedItem="{Binding SelectedModule}"
                      Width="150" Margin="0,0,5,0" />

            <TextBlock Text="Priority:" VerticalAlignment="Center" Margin="5,0,3,0" />
            <ComboBox ItemsSource="{Binding Priorities}" SelectedItem="{Binding SelectedPriority}"
                      Width="100" Margin="0,0,5,0" />

            <TextBlock Text="Status:" VerticalAlignment="Center" Margin="5,0,3,0" />
            <ComboBox ItemsSource="{Binding Statuses}" SelectedItem="{Binding SelectedStatus}"
                      Width="100" Margin="0,0,5,0" />

            <Button Content="Clear Filters" Command="{Binding ClearFiltersCommand}" Margin="5,0,5,0" Padding="8,2" />
            <Button Content="Export to Excel" Command="{Binding ExportToExcelCommand}" Margin="5,0,0,0" Padding="8,2" />
        </StackPanel>

        <!-- Footer -->
        <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" Margin="5" HorizontalAlignment="Center">
            <Button Content="&lt; Previous" Command="{Binding PreviousPageCommand}" Padding="8,2" Margin="0,0,10,0" />
            <TextBlock Text="{Binding SummaryText}" VerticalAlignment="Center" FontWeight="Bold" />
            <Button Content="Next &gt;" Command="{Binding NextPageCommand}" Padding="8,2" Margin="10,0,0,0" />
        </StackPanel>

        <!-- DataGrid -->
        <DataGrid ItemsSource="{Binding TestCases}" AutoGenerateColumns="False"
                  IsReadOnly="True" SelectionMode="Single" Margin="5"
                  GridLinesVisibility="Horizontal" AlternatingRowBackground="#F5F5F5">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="60" />
                <DataGridTextColumn Header="Title" Binding="{Binding Title}" Width="*" />
                <DataGridTextColumn Header="Module" Binding="{Binding Module}" Width="150" />
                <DataGridTemplateColumn Header="Priority" Width="80">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Border Padding="4,2" CornerRadius="3" HorizontalAlignment="Center">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Priority}" Value="P1">
                                                <Setter Property="Background" Value="#FFCCCC" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Priority}" Value="P2">
                                                <Setter Property="Background" Value="#FFE0B2" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Priority}" Value="P3">
                                                <Setter Property="Background" Value="#FFF9C4" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Priority}" Value="P4">
                                                <Setter Property="Background" Value="#C8E6C9" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <TextBlock Text="{Binding Priority}" HorizontalAlignment="Center" />
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Status" Width="100">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Border Padding="4,2" CornerRadius="3" HorizontalAlignment="Center">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Status}" Value="Pass">
                                                <Setter Property="Background" Value="#C8E6C9" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Status}" Value="Fail">
                                                <Setter Property="Background" Value="#FFCCCC" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Status}" Value="Blocked">
                                                <Setter Property="Background" Value="#FFE0B2" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <TextBlock Text="{Binding Status}" HorizontalAlignment="Center" />
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="Assignee" Binding="{Binding Assignee}" Width="120" />
                <DataGridTextColumn Header="Requirement" Binding="{Binding RequirementId}" Width="120" />
            </DataGrid.Columns>
        </DataGrid>
    </DockPanel>
</UserControl>
